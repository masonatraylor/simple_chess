<h1>Game <%= @game.name %></h1>

<% range = flip_board? ? (0..7).to_a.reverse : (0..7) %>
<div class='chess-grid mx-auto mt-5'>
  <% range.each do |row| %>
    <% range.each do |col| %>
      <div class='square <%= (row + col).even? ? 'white' : 'black' %>'>
        <% piece = @pieces.filter{ |p| p.x_position == col && p.y_position == row }.first %>
        <% if piece %>
          <a href='<%= piece_path(piece) %>'>
            <%= fa_icon('chess-' + piece.type.downcase, class:"piece-#{piece.color}") %>
          </a>
        <% end %>
      </div>
    <% end %>
  <% end %>
</div>

<%= link_to 'Forfeit', game_path(@game, forfeit: true), method: :put %>
